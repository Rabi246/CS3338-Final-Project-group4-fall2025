\documentclass[12pt]{article}

% Packages
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{array}
\usepackage{hyperref}
\usepackage{setspace}
\setcounter{secnumdepth}{4}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue
}

\begin{document}

%========================
% COVER PAGE
%========================
\begin{titlepage}
    \centering
    \vspace*{2cm}
    {\LARGE \textbf{Software Design Document (SDD)}\par}
    \vspace{1.5cm}
    {\large Project: \textbf{Lab Activity 14}\par}
    \vspace{0.5cm}
    {\large Team Name: \textbf{Tommy W., Nadia H., Damarion M.P, Samantha V.M, Stephany C.P}\par}
    \vspace{0.5cm}
    {\large Group Number: \textbf{4}\par}
    \vspace{0.5cm}
    {\large Version: \textbf{4.0}\par}
    \vfill
    {\large Date: \textbf{December 5, 2025}\par}
    \vspace{2cm}
\end{titlepage}

%========================
% TABLE OF CONTENTS
%========================
\tableofcontents
\newpage

%========================
% VERSION DESCRIPTION
%========================
\section*{Version Description}
\addcontentsline{toc}{section}{Version Description}

\begin{longtable}{|>{\centering\arraybackslash}m{3cm}|
                      >{\arraybackslash}m{7cm}|
                      >{\centering\arraybackslash}m{3cm}|}
    \hline
    \textbf{Version} & \textbf{Description} & \textbf{Date} \\
    \hline
    1.0 & Snapshot 1. Created system overview and basic architecture. & December 5, 2025 \\
    \hline
    2.0 & Snapshot 2. Expanded architecture; added AWS + Box components. & December 5, 2025 \\
    \hline
    3.0 & Snapshot 3. Added workflow details and error-handling descriptions. & December 8, 2025 \\
    \hline
    4.0 & Snapshot 4. Final revisions; added UI section, glossary updates, formatting fixes. & December 10, 2025 \\
    \hline
\end{longtable}

\newpage

%========================
% 1. INTRODUCTION
%========================
\section{Introduction}

\subsection{Purpose of the Document}
The purpose of this document is to provide a detail description of the Design details that will be used for Box Discovery Bates Namer. This sofware is a transition from a desktop-based system to a cloud based one. This Sofware Design Document(SSD) covers the system architecture, user interface and intended audience for the application.

\subsection{Intended Audience}
This document is intended for:
\begin{itemize}
    \item The development team implementing the system.
    \item The course instructor and teaching assistants reviewing the design.
    \item Future developers who may extend or maintain the system.
    \item Various Stakeholders
\end{itemize}

\subsection{Overview of the System}
The \textbf{Box Discovery Bates Namer} is a cloud based solution designed to automate the prossessing the legal discovery PDF files. The application extracts Bates numbers, validates their sequence, renames the files accordingly, and stores them in Box.com.

\newline
The system leverages a \textbf{serverless architecture} using \textbf{AWS Lambda functions} for scalability and efficiency. Upon a file upload event to \textbf{Box.com}, the application processes the files in memory to preserve data confidentiality and comply with data privacy requirements.

\subsubsection{Key Features}

\subparagraph{Integration with Box.com}
\begin{itemize}
    \item Triggered by an HTTPS API Gateway call when files are uploaded to Box.com.
    \item Retrieves file details, including file ID, folder ID, and file name, from the event payload.
\end{itemize}

\subparagraph{Custom Payload Creation}
\begin{itemize}
    \item An initial AWS Lambda function captures the file metadata and creates a custom payload,
          which is passed to the next Lambda function for processing.
\end{itemize}

This system provides a robust and efficient solution for legal professionals by automating discovery file management, enhancing accuracy, and streamlining the workflow.

\newpage

%========================
% 2. SYSTEM ARCHITECTURE
%========================
\section{System Architecture}

\subsection{Overall Workflow of the System}

The Box Discovery Bates Namer follows an automated, event-driven workflow that 
integrates Box.com with AWS Lambda to process, validate, and rename legal discovery
PDF files. The workflow begins when the user uploads a discovery folder into Box.com
and ends when files are renamed, validated, organized, or flagged for errors.

\begin{enumerate}
    \item \textbf{User Uploads Discovery Files to Box.com}  
    A legal professional uploads a folder using the naming format 
    \texttt{PDCase\#\_Disc\#} (e.g., \texttt{PD251234\_02}). Each PDF uploaded 
    triggers the Box Custom Skill.

    \item \textbf{Box Custom Skill Triggers AWS Processing Pipeline}  
    Box sends a webhook request to an HTTPS API Gateway endpoint, which invokes
    the first Lambda function.

    \item \textbf{BoxInputFunction Captures File Metadata}  
    The initial Lambda function validates the webhook and extracts file metadata:
    \begin{itemize}
        \item file\_id
        \item file\_name
        \item folder\_id
        \item access\_token
        \item user\_id
    \end{itemize}
\end{enumerate}

This automated workflow eliminates manual processing, ensures file consistency, 
and provides reliable error reporting for legal professionals.

% ==============================
% INSERT WORKFLOW DIAGRAM HERE
% ==============================
\begin{figure}[h!]
\centering
\input{../WorkflowDiagram.tex}
\caption{High-Level Workflow Diagram for Box Discovery Bates Namer}
\end{figure}

\subsection{System Components}

The Box Discovery Bates Namer system is built on a serverless architecture using AWS
Lambda and Box.com. The major components are:

\subsubsection{AWS Lambda Functions}
Event-driven functions that perform the core processing:
\begin{itemize}
    \item \textbf{BoxInputFunction} – Validates the webhook and extracts file metadata.
    \item \textbf{BoxFolderGetter} – Retrieves the folder name to identify the PD Case and Disc Number.
    \item \textbf{DiscoveryBatesNamer} – Downloads the PDF, extracts and validates Bates numbers, and generates the new filename.
    \item \textbf{BoxFileUpdater} – Renames and moves the processed file into the appropriate Box folder.
    \item \textbf{BoxErrorNotification} – Sends error notifications via AWS SES.
\end{itemize}

\subsubsection{Box API}
\begin{itemize}
    \item Downloads files for processing.
    \item Renames files based on extracted Bates sequence.
    \item Moves files to the correct folder based on PD Case and Disc number.
\end{itemize}

\subsubsection{AWS API Gateway}
Provides the HTTPS endpoint that receives webhook events from Box and triggers the
Lambda pipeline.

\subsubsection{AWS SES}
Sends automated email notifications when errors occur.

\subsubsection{AWS CloudWatch}
Captures logs, execution metrics, and error traces for debugging.

\newpage

%========================
% 3. USER INTERFACE
%========================
\section{User Interface}

\subsection{Overview}
The Box Discovery Bates Namer does not require a custom user interface. All user
interaction occurs through the existing Box.com platform. Users upload discovery
folders and PDF files directly into a designated skill-enabled folder, and the
system automatically processes each file.

\subsection{How Users Interact With the System}
\begin{itemize}
    \item Log into Box.com.
    \item Navigate to the “Skills Applied” folder.
    \item Upload a correctly named folder (e.g., \texttt{PD251234\_02}).
    \item System renames files, validates sequences, and moves completed files automatically.
    \item Errors (missing Bates, wrong folder name, invalid files) trigger email notifications.
\end{itemize}

\subsection{User Interface Screens}
Users only interact with:
\begin{itemize}
    \item The Box folder view  
    \item The PDF upload interface  
\end{itemize}

All processing happens in the background.

\subsection{Data Storage and Management}

\begin{itemize}
    \item \textbf{Box.com} stores all PDFs and renamed files.
    \item \textbf{AWS Secrets Manager} stores Box credentials.
    \item \textbf{AWS CloudWatch Logs} stores execution logs and error history.
\end{itemize}

\newpage

%========================
% 4. GLOSSARY
%========================
\section{Glossary}

\begin{longtable}{|>{\centering\arraybackslash}m{3cm}|
                      >{\arraybackslash}m{9cm}|}
    \hline
    \textbf{Acronym} & \textbf{Definition} \\
    \hline
    UI & User Interface \\
    \hline
    API & Application Programming Interface \\
    \hline
    DB & Database \\
    \hline
    SRS & Software Requirements Specification \\
    \hline
    SDD & Software Design Document \\
    \hline
\end{longtable}

\begin{longtable}{|>{\centering\arraybackslash}m{3cm}|
                      >{\arraybackslash}m{9cm}|}
    \hline
    \textbf{Key Definitions} & \textbf{Definition} \\
    \hline
    Bates Number & Sequential identifier assigned to legal document pages. \\
    \hline
    Box.com & Cloud-based file storage and collaboration platform. \\
    \hline
    AWS Lambda & Serverless compute service that runs code in response to events. \\
    \hline
\end{longtable}

\newpage

%========================
% 5. REFERENCES
%========================
\section{References}

\begin{thebibliography}{9}
\bibitem{source}
Santa Barbara Public Defender’s Office. 
\textit{Software Design Document for Box Discovery Bates Namer Integration into Cloud Environment}. 
Version 1.1.2, April 10, 2025.  
\url{https://ascent.cysun.org/project/project/view/221}
\end{thebibliography}

\end{document}
